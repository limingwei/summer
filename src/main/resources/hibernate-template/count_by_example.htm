<#-- 
    count_by_example SQL生成元模版
-->
<${pound}-- count_by_example sql template for ${type} -->
<${at}compress single_line=true> <${pound}-- 合并换行 -->
/* count_by_example(${type.simpleName}) */

    <${pound}assign whereQuery=" WHERE id>0 "/>

<#list dao.getBasicFields(type) as field> 
    <${pound}if entity.${field}??>
            <#if def['Mirrors'].isBooleanType(dao.getFieldType(type,field))>
                <${pound}assign whereQuery=whereQuery+"AND ${dao.getColumn(type,field)}='${dollar}{entity.${field}?string('1','0')}'"/>
            <#elseif def['Mirrors'].isBasicType(dao.getFieldType(type,field))> 
                <${pound}assign whereQuery=whereQuery+"AND ${dao.getColumn(type,field)}='${dollar}{entity.${field}}'"/>
            <#else> 
                <${pound}assign whereQuery=whereQuery+"AND ${dao.getJoinColumn(type,field)}='${dollar}{entity.${field}.${dao.getIdField(type)}}'"/>
            </#if>
    </${pound}if> 
</#list>

    SELECT COUNT(*) FROM ${dao.getTableName(type)} ${dollar}{whereQuery}
</${at}compress>
<#-- count_by_example SQL生成元模版结束 -->