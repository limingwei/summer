<#-- 
    动态插入SQL生成元模版 
    根据对象数据结构生成动态语句模版,再生成非空插入语句
-->
<${pound}-- dynamic save sql template for ${type} -->
<${at}compress single_line=true> <${pound}-- 合并换行 -->
/* saveIgnoreNull(${type.simpleName}) */

    <${pound}assign fields=""/>
    <${pound}assign values=""/>

    <${pound}assign is_first=true/> <${pound}-- 第一个 -->

<#list dao.getBasicFields(type) as field> 
    <${pound}if entity.${field}??> 
        <${pound}if is_first> <${pound}-- 非第一个加逗号 -->
            <#if def['Mirrors'].isBooleanType(dao.getFieldType(type,field))> 
                <${pound}assign fields=fields+" ${dao.getColumn(type,field)?default('column_not_found_1')}"/>
                <${pound}assign values=values+" ${dollar}{entity.${field}?string('1','0')}"/>
            <#elseif def['Mirrors'].isBasicType(dao.getFieldType(type,field))> 
                <${pound}assign fields=fields+" ${dao.getColumn(type,field)?default('column_not_found_2')}"/>
                <${pound}assign values=values+" '${dollar}{entity.${field}}'"/>
            <#else> 
                <${pound}assign fields=fields+" ${dao.getJoinColumn(type,field)}"/>
                <${pound}assign values=values+" '${dollar}{entity.${field}.${dao.getIdField(type)}}'"/>
            </#if>
            <${pound}assign is_first=false/> <${pound}-- 非第一个 -->
        <${pound}else>
        <#if def['Mirrors'].isBooleanType(dao.getFieldType(type,field))> 
            <${pound}assign fields=fields+", ${dao.getColumn(type,field)?default('column_not_found_3')}"/>
            <${pound}assign values=values+", ${dollar}{entity.${field}?string('1','0')}"/>
        <#elseif def['Mirrors'].isBasicType(dao.getFieldType(type,field))> 
            <${pound}assign fields=fields+" , ${dao.getColumn(type,field)?default('column of '+field+' not_found[4]')}"/>
            <${pound}assign values=values+" , '${dollar}{entity.${field}}'"/>
        <#else> 
            <${pound}assign fields=fields+" , ${dao.getJoinColumn(type,field)}"/>
            <${pound}assign values=values+" , '${dollar}{entity.${field}.${dao.getIdField(type)}}'"/>
        </#if>
        </${pound}if>
    </${pound}if> 
</#list>

    INSERT INTO ${dao.getTableName(type)} ( ${dollar}{fields} ) VALUES ( ${dollar}{values} )
</${at}compress>
<#-- 动态插入SQL生成元模版结束 -->